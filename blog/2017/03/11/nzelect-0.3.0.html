      <!DOCTYPE html>
	<html lang="en">
		<head>
      <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
			<title>New data and functions in nzelect 0.3.0 R package</title>
      	
         
         
            <meta name ="description" content ="Version 0.3.0 of the nzelect R package now on CRAN includes historical polling data and a few convenience functions">
            <meta property="og:description" content ="Version 0.3.0 of the nzelect R package now on CRAN includes historical polling data and a few convenience functions">
         
         <meta property="og:site_name" content="free range statistics" />
         <meta property="og:title" content="New data and functions in nzelect 0.3.0 R package" />
         
            <meta property="og:image" content="https:/freerangestats.info/img/0082-scenarios.png" />
         
		 
			<meta property="og:url" content="https://freerangestats.info/blog/2017/03/11/nzelect-0.3.0.html" />
		 
         <meta property="og:author" content= "https://www.facebook.com/peterstats" />
         <meta property="og:type" content="article" />
      

<link href='https://fonts.googleapis.com/css?family=Sarala' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Prosto+One' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
<link href='https://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet'>
	  
          <link href="/css/bootstrap.min.css" rel ="stylesheet" type="text/css">
          <link href="/css/bootstrap-theme.min.css" rel ="stylesheet" type="text/css">
            <link href="/css/custom.css" rel ="stylesheet" type="text/css">     
		<link href="/css/syntax.css" rel ="stylesheet" type="text/css">     			
                 
            
   <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

     ga('create', 'UA-65886313-1', 'auto');
     ga('send', 'pageview');

   </script>
   
   <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>



   <style>
    ul li { margin-bottom: 9px; }
    ol li { margin-bottom: 9px; }
   </style>
   
   <link rel="alternate" type="application/rss+xml" title="free range statistics by Peter Ellis"
      href="/feed.xml">

	  

      
		</head>
      
  <body role = "document">
  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="/js/bootstrap.min.js"></script>
        
		<div id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//connect.facebook.net/en_GB/sdk.js#xfbml=1&version=v2.6";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
  
  <script>
  (function() {
    var cx = '015640467633673901770:pk3v2c95baw';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>

  
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">free range statistics</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="/about">about</a></li>
            <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">all posts <span class="caret"></span></a>
                <ul class="dropdown-menu">
                  <li><a href="/blog">ordered by date</a></li>
				  <li><a href="/blog/most-popular.html">ordered by popularity</a></li>
                  <li><a href="/blog/index_by_tag.html">grouped by subject matter</a></li>
                  <li><a href="/blog/nz.html">all posts with data about new zealand</a></li>
				  <li><a href="/blog/voting.html">all posts on voting behaviour</a></li>
                  <li><a href="/blog/surveys.html">all posts on surveys</a></li> 
				  <li><a href = /blog/2024/07/27/aging-pacific>most recent post</a></li>
				</ul>
            </li>
              <li><a href="/blog/showcase.html">showcase</a></li>
              <li><a href="/presentations/index.html">presentations</a></li>
			  <li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">forecasts<span class="caret"></span></a>
                <ul class="dropdown-menu">
				  <li><a href = "/covid-tracking/index.html">Covid-19 in Australia</a></li>
                  <li><a href = "/elections/nz-2020/index.html">NZ election 2020</a></li>
                  <li><a href = "/elections/oz-2019/index.html">Australia federal election 2019</a></li>
				  <li><a href = "/elections/nz-2017/combined.html">NZ election 2017</a></li>
                  <li><a href="/blog/voting.html">all blog posts on voting behaviour</a></li>
                </ul>				
			  </li>
			  
			  
			  
		    </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
  
  
      
			<div class="container">
			
			<div class="jumbotron">
  <div class="container">
	<center><h1>New data and functions in nzelect 0.3.0 R package</h1></center>
  </div>
</div>



	<div class = "post-summary">
	<h2>At a glance:</h2>
	   <p>Version 0.3.0 of the nzelect R package now on CRAN includes historical polling data and a few convenience functions</p>
	   <p class="meta">11 Mar 2017</p>
	   <hr></hr>
	</div>


<div class="col-md-7">

	<div class="post">
		
	  <h2 id="polling-data-and-other-goodies-ready-for-download">Polling data and other goodies ready for download</h2>
<p>A new version, 0.3.0, of the <code class="language-plaintext highlighter-rouge">nzelect</code> R package is <a href="https://CRAN.R-project.org/package=nzelect">now available on CRAN</a>.</p>

<ul>
  <li>historical polling data from 2002 to February 2017, sourced from Wikipedia</li>
  <li>some small functions to help convert voting numbers into seats in a New Zealand or similar proportional representation system; and to weight polling numbers in the way done by two of New Zealand’s polling aggregator websites.</li>
  <li>some small bits of metadata on political parties, most notably named vectors of their colours for use in graphics.</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">nzelect</code> was originally developed in response to <a href="http://www.arilamstein.com/blog/2016/04/18/r-election-analysis-contest-results/">Ari Lamstein’s R election analysis contest</a>, and my series of blog posts drawing on its data won me that competition.  The first major version included polling-place election results from the 2014 election.   The main purpose of the package remains to make these data available in tidier, more analysis-ready format than the <a href="http://archive.electionresults.govt.nz/">Electoral Commission’s official election results site</a>.</p>

<p>I still have plans to add the results from earlier elections, but with a New Zealand general election now scheduled for 23 September 2017 I thought I’d prioritise some polling data.  I’m hoping to up the level of sophistication of at least a corner of the debate in the leadup to the election.  I’ve got some blog posts on things like house effects (eg historical biases of different polling firms when confronted with actual election results) and probabilistic prediction coming up, and needed a clean and tidy set of historical data to do this.</p>

<h2 id="historical-polling-data">Historical polling data</h2>

<p>The polling data was the main addition to this version of <code class="language-plaintext highlighter-rouge">nzelect</code>.  The data have been scraped from a range of Wikipedia pages and subjected to some cleaning.  With this somewhat sketchy provenance, they can’t be guaranteed but they look very plausible.  All the data have been combined in a single data frame <code class="language-plaintext highlighter-rouge">polls</code> which looks like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>           Pollster      WikipediaDates  StartDate    EndDate    MidDate         Party VotingIntention   Client ElectionYear
5965 Colmar Brunton 11–15 February 2017 2017-02-11 2017-02-15 2017-02-13 United Future            0.00 One News         2017
5966 Colmar Brunton 11–15 February 2017 2017-02-11 2017-02-15 2017-02-13         Maori            0.01 One News         2017
5967 Colmar Brunton 11–15 February 2017 2017-02-11 2017-02-15 2017-02-13       Destiny              NA One News         2017
5968 Colmar Brunton 11–15 February 2017 2017-02-11 2017-02-15 2017-02-13   Progressive              NA One News         2017
5969 Colmar Brunton 11–15 February 2017 2017-02-11 2017-02-15 2017-02-13          Mana            0.01 One News         2017
5970 Colmar Brunton 11–15 February 2017 2017-02-11 2017-02-15 2017-02-13  Conservative            0.00 One News         2017
</code></pre></div></div>

<p>Election results (actual total party vote by party) are also included for convenience.  This doesn’t remove the need to bring in the detailed historical election results by polling place in future versions of <code class="language-plaintext highlighter-rouge">nzelect</code>, but gives a start on the historical perspective.</p>

<p>Combining multiple election cycles of polling data together makes it possible to see the longer game in party political change in New Zealand:</p>

<p><img src="/img/0082-polls.svg" width="100%" /></p>

<p>Here’s the code behind that graphic.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">scales</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">nzelect</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">forcats</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">stringr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">rvest</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">magrittr</span><span class="p">)</span><span class="w">

</span><span class="c1">#=========polls demo=========</span><span class="w">
</span><span class="n">election_dates</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">polls</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">filter</span><span class="p">(</span><span class="n">Pollster</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Election result"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">select</span><span class="p">(</span><span class="n">MidDate</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">distinct</span><span class="p">()</span><span class="w">

</span><span class="n">polls</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="n">Party</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Destiny"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Progressive"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">mutate</span><span class="p">(</span><span class="n">Party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"M.ori"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Maori"</span><span class="p">,</span><span class="w"> </span><span class="n">Party</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">mutate</span><span class="p">(</span><span class="n">Party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_reorder</span><span class="p">(</span><span class="n">Party</span><span class="p">,</span><span class="w"> </span><span class="n">VotingIntention</span><span class="p">,</span><span class="w"> </span><span class="n">.desc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">),</span><span class="w">
          </span><span class="n">Pollster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_relevel</span><span class="p">(</span><span class="n">Pollster</span><span class="p">,</span><span class="w"> </span><span class="s2">"Election result"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MidDate</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VotingIntention</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Pollster</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">geom_line</span><span class="p">(</span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">geom_point</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">geom_smooth</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">group</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Party</span><span class="p">),</span><span class="w"> </span><span class="n">se</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grey15"</span><span class="p">,</span><span class="w"> </span><span class="n">span</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">.20</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">scale_y_continuous</span><span class="p">(</span><span class="s2">"Voting intention"</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">percent</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">scale_x_date</span><span class="p">(</span><span class="s2">""</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">Party</span><span class="p">,</span><span class="w"> </span><span class="n">scales</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"free_y"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">geom_vline</span><span class="p">(</span><span class="n">xintercept</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">election_dates</span><span class="o">$</span><span class="n">MidDate</span><span class="p">),</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"grey80"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"15 years of voting intention opinion polls in New Zealand"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">labs</span><span class="p">(</span><span class="n">caption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Source: nzelect #Rstats package on CRAN"</span><span class="p">)</span></code></pre></figure>

<p>The CRAN version of an R package isn’t the appropriate way to make day to day updates available - upgrades on CRAN should only be every three months or so at the most.  I will probably keep the GitHub version up to date as more polling data comes in, but I’m not in the position to give a service level commitment on timeliness.</p>

<h2 id="converting-voting-results-to-seats">Converting voting results to seats</h2>

<p>One thing we need to be able to do efficiently if we’re going to facilitate polling punditry is convert election results - real or hypothetical - into actual seats in Parliament.  Since 1996, New Zealand has 120 or more seats in its single house of parliament to be allocated by a system known as “mixed-member proportional”.  Each elector has two votes - an electorate vote and a party vote.  <a href="http://www.elections.org.nz/news-media/new-zealand-2014-general-election-official-results">71 of the seats (at the time of writing)</a> are “first past the post” electorates.  However, these electorate votes have very little (not quite none) impact on the total make-up of Parliament, because the remaining seats are allocated to “lists” provided by the parties in such a way as to be in proportion to the electors’ party votes.</p>

<p>Only parties that received five percent of the party vote, or that have won at least one electorate, are counted in the proportional representation part.</p>

<p>The reason why there are 120 “or more” seats is the same as the reason why electorate votes have not quite exactly zero impact on the overall makeup.  If a party wins more electorates than they would be entitled to from their party vote, the difference is translated into <a href="https://en.wikipedia.org/wiki/Overhang_seat">“overhang seats”</a>.  After the 2014 election there was one such seat; the leader of the United Future party won the Ōhariu electorate, but the party received only 0.22% of the party vote (much less than 1/120th), so he holds the 121st seat in Parliament.</p>

<p>The method of allocating the list seats is known as the <a href="http://www.elections.org.nz/voting-system/mmp-voting-system/sainte-lague-allocation-formula">Sainte-Laguë</a> or <a href="https://en.wikipedia.org/wiki/Webster/Sainte-Lagu%C3%AB_method">Webster/Sainte-Laguë</a> method.  It’s well explained on <a href="https://en.wikipedia.org/wiki/Webster/Sainte-Lagu%C3%AB_method">Wikipedia</a>.  It’s now available in <code class="language-plaintext highlighter-rouge">nzelect</code> via the <code class="language-plaintext highlighter-rouge">allocate_seats()</code> function.</p>

<p><code class="language-plaintext highlighter-rouge">allocate_seats</code> defaults to New Zealand settings (5% threshold, 120 seats if no overhang seats) but these can be set to other values for use in other electoral systems or conducting thought experiments about New Zealand.  For example, the 5% threshhold acts as a barrier to small parties getting representation in Parliament proportionate to their support.  A <a href="https://en.wikipedia.org/wiki/Electoral_reform_in_New_Zealand">2012 review</a> recommended amongst other things reducing this to 4%, although this wasn’t adopted by Parliament.  Other countries with similar systems have lower thresholds; for example, Israel has had no less than four different threshold figures in the past thirty years (1%, 1.5%, 2%, and the current value of 3.25%).</p>

<p>Here’s how the New Zealand Parliament would have looked with different values of the threshold for getting access to the proportional representation part of the system:</p>

<p><img src="/img/0082-scenarios1.svg" width="100%" /></p>

<p>We can see that the Conservative party were the big losers from the 5% threshold rule; with 3.97% of the party vote and no seats in Parliament under current rules (or indeed the 4% threshold proposed and rejected in 2012), but five seats if using the Israeli threshold.</p>

<p>Using electoral results data and functions from the <code class="language-plaintext highlighter-rouge">nzelect</code> and other packages, here’s how that analysis was done:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">#================2014 theshold scenarios=========</span><span class="w">
</span><span class="c1"># Party vote results from the 2014 election</span><span class="w">
</span><span class="n">results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">GE2014</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">mutate</span><span class="p">(</span><span class="n">VotingType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="n">VotingType</span><span class="p">,</span><span class="w"> </span><span class="s2">"Vote"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">group_by</span><span class="p">(</span><span class="n">Party</span><span class="p">,</span><span class="w"> </span><span class="n">VotingType</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">summarise</span><span class="p">(</span><span class="n">Votes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">Votes</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">spread</span><span class="p">(</span><span class="n">VotingType</span><span class="p">,</span><span class="w"> </span><span class="n">Votes</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">select</span><span class="p">(</span><span class="n">Party</span><span class="p">,</span><span class="w"> </span><span class="n">PartyVote</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">ungroup</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">PartyVote</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">filter</span><span class="p">(</span><span class="n">Party</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">"Informal Party Votes"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">arrange</span><span class="p">(</span><span class="n">desc</span><span class="p">(</span><span class="n">PartyVote</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">mutate</span><span class="p">(</span><span class="n">Party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">" Party"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">Party</span><span class="p">),</span><span class="w">
          </span><span class="n">Party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"New Zealand First"</span><span class="p">,</span><span class="w"> </span><span class="s2">"NZ First"</span><span class="p">,</span><span class="w"> </span><span class="n">Party</span><span class="p">),</span><span class="w">
          </span><span class="n">Party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"Internet MANA"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Mana"</span><span class="p">,</span><span class="w"> </span><span class="n">Party</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">left_join</span><span class="p">(</span><span class="n">parties_df</span><span class="p">[,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Shortname"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Colour"</span><span class="p">)],</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Party"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Shortname"</span><span class="p">))</span><span class="w">

</span><span class="c1"># Electorate seats from the 2014 election</span><span class="w">
</span><span class="n">electorate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">41</span><span class="p">,</span><span class="w"> </span><span class="m">27</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> 
               </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> 
               </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w">
               </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w">
               </span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">,</span><span class="m">0</span><span class="p">)</span><span class="w">

</span><span class="c1"># Seats awarded under different scenarios:</span><span class="w">
</span><span class="n">res2014</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data_frame</span><span class="p">(</span><span class="w">
   </span><span class="n">party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">results</span><span class="o">$</span><span class="n">Party</span><span class="p">,</span><span class="w">
   </span><span class="n">`5% threshold\n(actual result)`</span><span class="w"> </span><span class="o">=</span><span class="w"> 
      </span><span class="n">allocate_seats</span><span class="p">(</span><span class="n">results</span><span class="o">$</span><span class="n">PartyVote</span><span class="p">,</span><span class="w"> </span><span class="n">electorate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">electorate</span><span class="p">)</span><span class="o">$</span><span class="n">seats_v</span><span class="p">,</span><span class="w">
   </span><span class="n">`3.25% threshold like Israel\n(hypothetical result)`</span><span class="w"> </span><span class="o">=</span><span class="w"> 
      </span><span class="n">allocate_seats</span><span class="p">(</span><span class="n">results</span><span class="o">$</span><span class="n">PartyVote</span><span class="p">,</span><span class="w"> </span><span class="n">electorate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">electorate</span><span class="p">,</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.0325</span><span class="p">)</span><span class="o">$</span><span class="n">seats_v</span><span class="p">,</span><span class="w">
   </span><span class="n">`No threshold\n(hypothetical result)`</span><span class="w"> </span><span class="o">=</span><span class="w"> 
      </span><span class="n">allocate_seats</span><span class="p">(</span><span class="n">results</span><span class="o">$</span><span class="n">PartyVote</span><span class="p">,</span><span class="w"> </span><span class="n">electorate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">electorate</span><span class="p">,</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="o">$</span><span class="n">seats_v</span><span class="w">
</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">gather</span><span class="p">(</span><span class="n">scenario</span><span class="p">,</span><span class="w"> </span><span class="n">seats</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">party</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">mutate</span><span class="p">(</span><span class="n">party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_wrap</span><span class="p">(</span><span class="n">party</span><span class="p">,</span><span class="w"> </span><span class="m">15</span><span class="p">),</span><span class="w">
          </span><span class="n">party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_reorder</span><span class="p">(</span><span class="n">party</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">seats</span><span class="p">,</span><span class="w"> </span><span class="n">fun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">),</span><span class="w">
          </span><span class="n">scenario</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_relevel</span><span class="p">(</span><span class="n">scenario</span><span class="p">,</span><span class="w"> </span><span class="s2">"5% threshold\n(actual result)"</span><span class="p">),</span><span class="w">
          </span><span class="n">party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_other</span><span class="p">(</span><span class="n">party</span><span class="p">,</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">party</span><span class="p">)[</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">]))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">group_by</span><span class="p">(</span><span class="n">party</span><span class="p">,</span><span class="w"> </span><span class="n">scenario</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">summarise</span><span class="p">(</span><span class="n">seats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">seats</span><span class="p">))</span><span class="w"> 
   
</span><span class="n">res2014</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seats</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scenario</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seats</span><span class="p">))</span><span class="w">  </span><span class="o">+</span><span class="w">
   </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">party</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">geom_segment</span><span class="p">(</span><span class="n">xend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">yend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scenario</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">party</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.3</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">scale_colour_manual</span><span class="p">(</span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parties_v</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">scale_y_discrete</span><span class="p">(</span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">levels</span><span class="p">(</span><span class="n">res2014</span><span class="o">$</span><span class="n">scenario</span><span class="p">)[</span><span class="m">3</span><span class="o">:</span><span class="m">1</span><span class="p">])</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">geom_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">theme</span><span class="p">(</span><span class="n">legend.position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"none"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Impact of changing minimum threshold for seats in Parliament"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"New Zealand 2014 election seat allocation"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Seats"</span><span class="p">,</span><span class="w"> 
        </span><span class="n">caption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Analysis using the `nzelect` R package"</span><span class="p">)</span></code></pre></figure>

<p>For comparison, here are the same scenarios with the 2011 election results:</p>

<p><img src="/img/0082-scenarios2.svg" width="100%" /></p>

<p>Because the full 2011 election results aren’t yet available in <code class="language-plaintext highlighter-rouge">nzelect</code>, the code below needs to scrape them from a HTML table on the Electoral Commission’s site, using the very user-friendly <code class="language-plaintext highlighter-rouge">rvest</code> R package:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1">#================2011 theshold scenarios=========</span><span class="w">
</span><span class="n">res2011</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"http://archive.electionresults.govt.nz/electionresults_2011/partystatus.html"</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">read_html</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="c1"># extract all the tables:</span><span class="w">
   </span><span class="n">html_nodes</span><span class="p">(</span><span class="n">css</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"table"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="c1"># we only want the fourth table:</span><span class="w">
   </span><span class="n">extract2</span><span class="p">(</span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="c1"># turn it into a data frame:</span><span class="w">
   </span><span class="n">html_table</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="c1"># drop the first four rows:</span><span class="w">
   </span><span class="n">slice</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">))</span><span class="w">

</span><span class="c1"># give it some real names:</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">res2011</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Party"</span><span class="p">,</span><span class="w"> </span><span class="s2">"PartyVote"</span><span class="p">,</span><span class="w"> </span><span class="s2">"PropVote"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ElectorateSeats"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ListSeats"</span><span class="p">,</span><span class="w"> </span><span class="s2">"TotalSeats"</span><span class="p">)</span><span class="w">

</span><span class="n">res2011</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">res2011</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="c1"># turn into numbers:</span><span class="w">
   </span><span class="n">mutate</span><span class="p">(</span><span class="n">PartyVote</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">gsub</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">PartyVote</span><span class="p">)),</span><span class="w">
          </span><span class="n">ElectorateSeats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="n">ElectorateSeats</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="c1"># remove the "total seats" row:</span><span class="w">
   </span><span class="n">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">PartyVote</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="c1"># estimate seats</span><span class="w">
   </span><span class="n">mutate</span><span class="p">(</span><span class="w">
      </span><span class="n">`5% threshold\n(actual result)`</span><span class="w"> </span><span class="o">=</span><span class="w"> 
         </span><span class="n">allocate_seats</span><span class="p">(</span><span class="n">PartyVote</span><span class="p">,</span><span class="w"> </span><span class="n">electorate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ElectorateSeats</span><span class="p">)</span><span class="o">$</span><span class="n">seats_v</span><span class="p">,</span><span class="w">
      </span><span class="n">`3.25% threshold like Israel\n(hypothetical result)`</span><span class="w"> </span><span class="o">=</span><span class="w"> 
         </span><span class="n">allocate_seats</span><span class="p">(</span><span class="n">PartyVote</span><span class="p">,</span><span class="w"> </span><span class="n">electorate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ElectorateSeats</span><span class="p">,</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.0325</span><span class="p">)</span><span class="o">$</span><span class="n">seats_v</span><span class="p">,</span><span class="w">
      </span><span class="n">`No threshold\n(hypothetical result)`</span><span class="w"> </span><span class="o">=</span><span class="w"> 
         </span><span class="n">allocate_seats</span><span class="p">(</span><span class="n">PartyVote</span><span class="p">,</span><span class="w"> </span><span class="n">electorate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ElectorateSeats</span><span class="p">,</span><span class="w"> </span><span class="n">threshold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="o">$</span><span class="n">seats_v</span><span class="w">
   </span><span class="p">)</span><span class="w">

</span><span class="n">res2011</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">select</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">PartyVote</span><span class="o">:</span><span class="n">TotalSeats</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">gather</span><span class="p">(</span><span class="n">scenario</span><span class="p">,</span><span class="w"> </span><span class="n">seats</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">Party</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">mutate</span><span class="p">(</span><span class="n">Party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">" Party"</span><span class="p">,</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">Party</span><span class="p">),</span><span class="w">
          </span><span class="n">Party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">gsub</span><span class="p">(</span><span class="s2">"New Zealand First"</span><span class="p">,</span><span class="w"> </span><span class="s2">"NZ First"</span><span class="p">,</span><span class="w"> </span><span class="n">Party</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">left_join</span><span class="p">(</span><span class="n">parties_df</span><span class="p">[,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Shortname"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Colour"</span><span class="p">)],</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Party"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Shortname"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">mutate</span><span class="p">(</span><span class="n">Party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_reorder</span><span class="p">(</span><span class="n">Party</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">seats</span><span class="p">),</span><span class="w">
          </span><span class="n">Party</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fct_other</span><span class="p">(</span><span class="n">Party</span><span class="p">,</span><span class="w"> </span><span class="n">keep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">levels</span><span class="p">(</span><span class="n">Party</span><span class="p">)[</span><span class="m">1</span><span class="o">:</span><span class="m">11</span><span class="p">]))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
   </span><span class="n">ggplot</span><span class="p">(</span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seats</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scenario</span><span class="p">,</span><span class="w"> </span><span class="n">label</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">seats</span><span class="p">))</span><span class="w">  </span><span class="o">+</span><span class="w">
   </span><span class="n">facet_wrap</span><span class="p">(</span><span class="o">~</span><span class="n">Party</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">geom_segment</span><span class="p">(</span><span class="n">xend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">yend</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scenario</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Party</span><span class="p">),</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.3</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">scale_colour_manual</span><span class="p">(</span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parties_v</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">scale_y_discrete</span><span class="p">(</span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="n">limits</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">levels</span><span class="p">(</span><span class="n">res2014</span><span class="o">$</span><span class="n">scenario</span><span class="p">)[</span><span class="m">3</span><span class="o">:</span><span class="m">1</span><span class="p">])</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">geom_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">theme</span><span class="p">(</span><span class="n">legend.position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"none"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">ggtitle</span><span class="p">(</span><span class="s2">"Impact of changing minimum threshold for seats in Parliament"</span><span class="p">,</span><span class="w">
           </span><span class="s2">"New Zealand 2011 election seat allocation"</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
   </span><span class="n">labs</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Seats"</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="n">caption</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Analysis using the `nzelect` R package"</span><span class="p">)</span></code></pre></figure>

<p>New Zealand has a Westminster-like rather than USA-like relation of parliament to the executive, in that the government needs to command a majority in Parliament (indicated in budget or confidence votes) or resign.  In practice, this generally leads to government by a coalition of parties, although this is not inevitable; in the 2014 election the National Party came within a whisker of being able to govern by itself (although political logic suggests they would have kept at least some junior coalition parties anyway).</p>

<p><code class="language-plaintext highlighter-rouge">nzelect</code> is available for installation from CRAN the usual way (<code class="language-plaintext highlighter-rouge">install.packages("nzelect")</code>).  Report any bugs, enhancement requests or issues on <a href="https://github.com/ellisp/nzelect/issues">GitHub</a> please.  I already know about the wrong vignette title on CRAN :(… will fix it next release.</p>

<p><a href="http://www.r-pkg.org/pkg/nzelect"><img src="http://www.r-pkg.org/badges/version/nzelect" alt="CRAN version" /></a>
<a href="http://www.r-pkg.org/pkg/nzelect"><img src="http://cranlogs.r-pkg.org/badges/nzelect" alt="CRAN RStudio mirror downloads" /></a></p>


		
	</div>
</div>

<div class="col-md-1"></div>
<div class="col-md-4">
	<div class="side-banner">
	


	<div>
	   
	    
			
			<p>&larr; Previous post</p>
			<p><a rel="prev" href="/blog/2017/03/04/childrens-books">Visualising relationships between children's books</a></p>
		
		
		
		
		 
			
			<p>Next post &rarr;</p>
			<p><a rel="next" href="/blog/2017/03/12/stepwise-timeseries">Simulations to explore excessive lagged X variables in time series modelling</a></p>
			
			
		
		
	</div>
	
	 

   <div class = "side-footer">
			
			<hr></hr>
			<p><gcse:search></gcse:search></p>
			<hr></hr>
        	<p>Follow <a href = "/feed.xml">this blog with RSS</a>.</p>
			<hr></hr>
			
			<p>My day job is Director of the <a href='https://sdd.spc.int/'>Statistics for Development Division</a> at the Pacific Community, the principal scientific and technical organisation in the Pacific region, proudly supporting development since 1947. We are an international development organisation owned and governed by our 27 country and territory members. This blog is not part of my role there and contains my personal views only.</p>
		
		    <hr></hr>
			
       <div class="fb-like" data-href="https://www.facebook.com/peterstats/" data-layout="standard" data-action="like" data-show-faces="false" data-share="false"></div>
			
			<hr></hr>
			<p>I'm pleased to be aggregated at <a href="https://www.r-bloggers.com/">R-bloggers</a>, the one-stop shop for blog posts featuring R.</p>
			<hr></hr>

			
			<p>			
            <span xmlns:dct="https://purl.org/dc/terms/" property="dct:title"><i>free range statistics</i></span> by <a href = "/about/index.html">Peter Ellis</a> is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
			</p>

			<hr></hr>
			


    </div>



  
   




		  
		  



	   
	<div id="disqus_thread"></div>

		<script type="text/javascript">
			/* * * CONFIGURATION VARIABLES * * */
			var disqus_shortname = 'statsinthewild';
			
			/* * * DON'T EDIT BELOW THIS LINE * * */
			(function() {
				var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
		</script>

		<script type="text/javascript">
			/* * * CONFIGURATION VARIABLES * * */
			var disqus_shortname = 'statsinthewild';
			
			/* * * DON'T EDIT BELOW THIS LINE * * */
			(function () {
				var s = document.createElement('script'); s.async = true;
				s.type = 'text/javascript';
				s.src = '//' + disqus_shortname + '.disqus.com/count.js';
				(document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
			}());
		</script>

	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
	</div>	
</div>    
   
   

			
			</div><!-- /.container -->
         
   <!-- Default Statcounter code for Free Range Statistics https://freerangestats.info -->
<script type="text/javascript">
var sc_project=11673245; 
var sc_invisible=1; 
var sc_security="5b7111a4"; 
</script>
<script type="text/javascript"
src="https://www.statcounter.com/counter/counter.js" async></script>
<noscript><div class="statcounter"><a title="Web Analytics"
href="https://statcounter.com/" target="_blank"><img class="statcounter"
src="//c.statcounter.com/11673245/0/5b7111a4/1/" alt="Web
Analytics"></a></div></noscript>
<!-- End of Statcounter Code -->

</body>   
</html>